<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>HexMazePanel.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Cent2</a> &gt; <a href="index.source.html" class="el_package">bomb.components.hex</a> &gt; <span class="el_source">HexMazePanel.java</span></div><h1>HexMazePanel.java</h1><pre class="source lang-java linenums">package bomb.components.hex;

import bomb.tools.hexalgorithm.Hex;
import bomb.enumerations.HexTraits;
import javafx.fxml.FXML;
import javafx.fxml.FXMLLoader;
import javafx.scene.layout.Pane;
import javafx.scene.paint.Color;
import javafx.scene.shape.Circle;
import javafx.scene.shape.Line;
import javafx.scene.shape.Polygon;
import javafx.scene.shape.Shape;

import java.io.IOException;
import java.util.ArrayList;

public class HexMazePanel extends Pane {
    @FXML
    private Line northWest, north, northEast, southEast, south, southWest;

    @FXML
    private Circle circle, peg;

    @FXML
    private Polygon hexagon, hexagonalFill, upTriangle, downTriangle, leftTriangle, rightTriangle;

    public HexMazePanel(){
<span class="nc" id="L28">        super();</span>
        try{
<span class="nc" id="L30">            FXMLLoader loader = new FXMLLoader(getClass().getResource(&quot;panel.fxml&quot;));</span>
<span class="nc" id="L31">            loader.setRoot(this);</span>
<span class="nc" id="L32">            loader.setController(this);</span>
<span class="nc" id="L33">            loader.load();</span>
<span class="nc" id="L34">            makeWallsTransparent();</span>
<span class="nc" id="L35">            peg.setFill(new Color(0.776,0.776,0.776,1.0));</span>
<span class="nc" id="L36">        } catch (IOException ioex){</span>
<span class="nc" id="L37">            ioex.printStackTrace();</span>
<span class="nc" id="L38">        }</span>
<span class="nc" id="L39">    }</span>

    public void fillPeg(Color toFill){
<span class="nc" id="L42">        peg.setFill(toFill);</span>
<span class="nc" id="L43">    }</span>

    public void setup(Hex.HexNode currentNode) {
<span class="nc" id="L46">        setupLines(currentNode.walls);</span>
<span class="nc" id="L47">        setupShape(currentNode.fill);</span>
<span class="nc" id="L48">    }</span>

    private void setupShape(HexTraits.HexShape shape){
<span class="nc bnc" id="L51" title="All 2 branches missed.">        if(shape != null){</span>
<span class="nc bnc" id="L52" title="All 6 branches missed.">            switch (shape) {</span>
<span class="nc" id="L53">                case Circle: exclusiveShapeSet(circle);</span>
<span class="nc" id="L54">                    break;</span>
<span class="nc" id="L55">                case Hexagon: exclusiveShapeSet(hexagon);</span>
<span class="nc" id="L56">                    break;</span>
<span class="nc" id="L57">                case LeftTriangle: exclusiveShapeSet(leftTriangle);</span>
<span class="nc" id="L58">                    break;</span>
<span class="nc" id="L59">                case RightTriangle: exclusiveShapeSet(rightTriangle);</span>
<span class="nc" id="L60">                    break;</span>
<span class="nc" id="L61">                case UpTriangle:exclusiveShapeSet(upTriangle);</span>
<span class="nc" id="L62">                    break;</span>
<span class="nc" id="L63">                default: exclusiveShapeSet(downTriangle);</span>
<span class="nc" id="L64">                    break;</span>
            }
        } else {
<span class="nc" id="L67">            disappear(circle);</span>
<span class="nc" id="L68">            disappear(hexagon);</span>
<span class="nc" id="L69">            disappear(leftTriangle);</span>
<span class="nc" id="L70">            disappear(rightTriangle);</span>
<span class="nc" id="L71">            disappear(upTriangle);</span>
<span class="nc" id="L72">            disappear(downTriangle);</span>
        }
<span class="nc" id="L74">    }</span>

    private void exclusiveShapeSet(Shape shape){
<span class="nc" id="L77">        xorAppear(shape);</span>
<span class="nc" id="L78">        xorDisappear(shape);</span>
<span class="nc" id="L79">    }</span>

    private void xorAppear(Shape shape){
<span class="nc bnc" id="L82" title="All 2 branches missed.">        if (shape == circle)</span>
<span class="nc" id="L83">            appear(circle);</span>
<span class="nc bnc" id="L84" title="All 2 branches missed.">        else if (shape == hexagon)</span>
<span class="nc" id="L85">            appear(hexagon);</span>
<span class="nc bnc" id="L86" title="All 2 branches missed.">        else if (shape == leftTriangle)</span>
<span class="nc" id="L87">            appear(leftTriangle);</span>
<span class="nc bnc" id="L88" title="All 2 branches missed.">        else if (shape == rightTriangle)</span>
<span class="nc" id="L89">            appear(rightTriangle);</span>
<span class="nc bnc" id="L90" title="All 2 branches missed.">        else if (shape == upTriangle)</span>
<span class="nc" id="L91">            appear(upTriangle);</span>
<span class="nc bnc" id="L92" title="All 2 branches missed.">        else if (shape == downTriangle)</span>
<span class="nc" id="L93">            appear(downTriangle);</span>
<span class="nc" id="L94">    }</span>

    private void xorDisappear(Shape shape){
<span class="nc" id="L97">        Shape[] array = createShapeArray();</span>
<span class="nc bnc" id="L98" title="All 2 branches missed.">        for (Shape current : array){</span>
<span class="nc bnc" id="L99" title="All 2 branches missed.">            if (current != shape)</span>
<span class="nc" id="L100">                disappear(current);</span>
        }
<span class="nc" id="L102">    }</span>

    private void setupLines(ArrayList&lt;HexTraits.HexWall&gt; walls){
<span class="nc" id="L105">        String remove = &quot;123456&quot;;</span>
<span class="nc bnc" id="L106" title="All 2 branches missed.">        if (walls != null) {</span>
<span class="nc bnc" id="L107" title="All 2 branches missed.">            for (HexTraits.HexWall wall : walls) {</span>
<span class="nc bnc" id="L108" title="All 6 branches missed.">                switch (wall.getIdx()) {</span>
<span class="nc" id="L109">                    case 0: remove = setLine(northWest, remove, &quot;1&quot;); break;</span>
<span class="nc" id="L110">                    case 1: remove = setLine(north, remove, &quot;2&quot;); break;</span>
<span class="nc" id="L111">                    case 2: remove = setLine(northEast, remove, &quot;3&quot;); break;</span>
<span class="nc" id="L112">                    case 3: remove = setLine(southWest, remove, &quot;4&quot;); break;</span>
<span class="nc" id="L113">                    case 4: remove = setLine(south, remove, &quot;5&quot;); break;</span>
<span class="nc" id="L114">                    default: remove = setLine(southEast, remove, &quot;6&quot;); break;</span>
                }
<span class="nc" id="L116">            }</span>
<span class="nc" id="L117">            removeLines(remove);</span>
        }
<span class="nc" id="L119">    }</span>

    private String setLine(Line line, String string, String remove){
<span class="nc" id="L122">        appear(line);</span>
<span class="nc" id="L123">        return string.replace(remove, &quot;&quot;);</span>
    }

    private void removeLines(String string){
<span class="nc bnc" id="L127" title="All 2 branches missed.">        if (string.contains(&quot;1&quot;)) disappear(northWest);</span>
<span class="nc bnc" id="L128" title="All 2 branches missed.">        if (string.contains(&quot;2&quot;)) disappear(north);</span>
<span class="nc bnc" id="L129" title="All 2 branches missed.">        if (string.contains(&quot;3&quot;)) disappear(northEast);</span>
<span class="nc bnc" id="L130" title="All 2 branches missed.">        if (string.contains(&quot;4&quot;)) disappear(southWest);</span>
<span class="nc bnc" id="L131" title="All 2 branches missed.">        if (string.contains(&quot;5&quot;)) disappear(south);</span>
<span class="nc bnc" id="L132" title="All 2 branches missed.">        if (string.contains(&quot;6&quot;)) disappear(southEast);</span>
<span class="nc" id="L133">    }</span>

    private void appear(Shape shape){
<span class="nc" id="L136">        shape.setOpacity(1);</span>
<span class="nc" id="L137">    }</span>

    private void disappear(Shape shape){
<span class="nc" id="L140">        shape.setOpacity(0);</span>
<span class="nc" id="L141">    }</span>

    public void makeWallsTransparent(){
<span class="nc" id="L144">        disappear(northWest);</span>
<span class="nc" id="L145">        disappear(north);</span>
<span class="nc" id="L146">        disappear(northEast);</span>
<span class="nc" id="L147">        disappear(southEast);</span>
<span class="nc" id="L148">        disappear(south);</span>
<span class="nc" id="L149">        disappear(southWest);</span>
<span class="nc" id="L150">    }</span>

    private Shape[] createShapeArray(){
<span class="nc" id="L153">        return new Shape[]{circle, hexagon, leftTriangle, rightTriangle, upTriangle, downTriangle};</span>
    }

    public void setHexagonalFill(Color color){
<span class="nc" id="L157">        hexagonalFill.setFill(color);</span>
<span class="nc" id="L158">    }</span>

    public void resetHexagonalFill(){
<span class="nc" id="L161">        hexagonalFill.setFill(new Color(0, 0, 0, 0));</span>
<span class="nc" id="L162">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>