!function(){var t={optionUseCountForPieText:!1};function e(t,e,n,r){if(t.endAngle-t.startAngle==0)return"M 0 0";var l=e*Math.cos(t.startAngle),a=n*Math.sin(t.startAngle),o=e*Math.cos(t.endAngle),i=n*Math.sin(t.endAngle),c=[];return c.push("M",l,a,"A",e,n,"0",t.endAngle-t.startAngle>Math.PI?1:0,"1",o,i,"L",r*o,r*i),c.push("A",r*e,r*n,"0",t.endAngle-t.startAngle>Math.PI?1:0,"0",r*l,r*a,"z"),c.join(" ")}function n(t,e,n,r){var l=t.startAngle>Math.PI?Math.PI:t.startAngle,a=t.endAngle>Math.PI?Math.PI:t.endAngle,o=e*Math.cos(l),i=n*Math.sin(l),c=e*Math.cos(a),s=n*Math.sin(a),u=[];return u.push("M",o,r+i,"A",e,n,"0 0 1",c,r+s,"L",c,s,"A",e,n,"0 0 0",o,i,"z"),u.join(" ")}function r(t,e,n,r,l){var a=t.startAngle<Math.PI?Math.PI:t.startAngle,o=t.endAngle<Math.PI?Math.PI:t.endAngle,i=l*e*Math.cos(a),c=l*n*Math.sin(a),s=l*e*Math.cos(o),u=l*n*Math.sin(o),d=[];return d.push("M",i,c,"A",l*e,l*n,"0 0 1",s,u,"L",s,r+u,"A",l*e,l*n,"0 0 0",i,r+c,"z"),d.join(" ")}function l(e){return t.optionUseCountForPieText?e.data.count>0?e.data.count:"":e.endAngle-e.startAngle>.2?Math.round(1e3*(e.endAngle-e.startAngle)/(2*Math.PI))/10+"%":""}t.transition=function(t,a,o,i,c,s){var u=d3.layout.pie().sort(null).value((function(t){return t.value}))(a);d3.select("#"+t).selectAll(".innerSlice").data(u).transition().duration(750).attrTween("d",(function(t){var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return r(e(t),o+.5,i+.5,c,s)}})),d3.select("#"+t).selectAll(".topSlice").data(u).transition().duration(750).attrTween("d",(function(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return e(n(t),o,i,s)}})),d3.select("#"+t).selectAll(".outerSlice").data(u).transition().duration(750).attrTween("d",(function(t){var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return n(e(t),o-.5,i-.5,c)}})),d3.select("#"+t).selectAll(".percent").data(u).transition().duration(750).attrTween("x",(function(t){var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return.6*o*Math.cos(.5*(e(t).startAngle+e(t).endAngle))}})).attrTween("y",(function(t){var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return.6*o*Math.sin(.5*(e(t).startAngle+e(t).endAngle))}})).text(l)},t.draw=function(i,c,s,u,d,h,p,A){t.centerX=s;var f=d3.layout.pie().sort(null).value((function(t){return t.value}))(c),g=d3.select("#"+i).append("g").attr("transform","translate("+s+","+u+")").attr("class","slices");g.selectAll(".innerSlice").data(f).enter().append("path").attr("class","innerSlice").style("fill",(function(t){return d3.hsl(t.data.color).darker(.7)})).attr("d",(function(t){return r(t,d+.5,h+.5,p,A)})).each((function(t){this._current=t})),g.selectAll(".topSlice").data(f).enter().append("path").attr("class","topSlice").style("fill",(function(t){return t.data.color})).style("stroke",(function(t){return t.data.color})).attr("d",(function(t){return e(t,d,h,A)})).each((function(t){this._current=t})),g.selectAll(".outerSlice").data(f).enter().append("path").attr("class","outerSlice").style("fill",(function(t){return d3.hsl(t.data.color).darker(.7)})).attr("d",(function(t){return n(t,d-.5,h-.5,p)})).each((function(t){this._current=t})),g.selectAll(".percent").data(f).enter().append("text").attr("class","percent").attr("x",(function(t){return.6*d*Math.cos(.5*(t.startAngle+t.endAngle))})).attr("y",(function(t){return.6*h*Math.sin(.5*(t.startAngle+t.endAngle))})).text(l).each((function(t){this._current=t})),g.selectAll(".innerSlice").on("mousemove",(function(t){return a(t)})),g.selectAll(".innerSlice").on("mouseout",(function(t){return o(t)})),g.selectAll(".topSlice").on("mousemove",(function(t){return a(t)})),g.selectAll(".topSlice").on("mouseout",(function(t){return o(t)})),g.selectAll(".outerSlice").on("mousemove",(function(t){return a(t)})),g.selectAll(".outerSlice").on("mouseout",(function(t){return o(t)}))},this.Donut3D=t;var a=function(e){if(d3.select("#tooltip #line1").text(e.data.count+" classes with"),d3.select("#tooltip #line3").text(e.data.label+" "+EQ_SELECTED_CLASS_METRIC),d3.event.pageX>t.centerX){var n=d3.event.pageX-30,r=d3.event.pageY-10;d3.select("#tooltip").style("right",n+"px").style("top",r+"px").style("left",n-150+"px").style("width","150px")}else{n=d3.event.pageX+10,r=d3.event.pageY-10;d3.select("#tooltip").style("left",n+"px").style("top",r+"px").style("right",n+150+"px").style("width","150px")}d3.select("#tooltip").classed("hidden",!1)},o=function(t){d3.select("#tooltip").classed("hidden",!0)}}();
